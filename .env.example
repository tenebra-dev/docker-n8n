# ==============================================
# PostgreSQL Database Configuration
# ==============================================
POSTGRES_USER=admin
POSTGRES_PASSWORD=P6rtZbIl&Hag5npvG7y-Wj#U
POSTGRES_DB=n8n_db
POSTGRES_NON_ROOT_USER=n8n_user
POSTGRES_NON_ROOT_PASSWORD=P6rtZbIl&Hag5npvG7y-Wj#U

# ==============================================
# Redis Configuration
# ==============================================
REDIS_PASSWORD=P8jZUiVYfnt4AxvDF2CdKgkzTrqQGMe1

# ==============================================
# n8n - Performance & Concurrency
# ==============================================
# Número de execuções paralelas por worker (recomendado: 5-10)
N8N_CONCURRENCY=10

# Timeout gracioso para workers finalizarem antes de desligar (segundos)
N8N_GRACEFUL_SHUTDOWN_TIMEOUT=30

# ==============================================
# n8n - Security & Encryption
# ==============================================
# CRÍTICO: Chave de criptografia para credenciais (mínimo 32 caracteres)
# Deve ser a MESMA em todos os serviços (main + workers)
# Gere uma chave forte usando: openssl rand -base64 32
N8N_ENCRYPTION_KEY=BvuijetdLt5rAMXmtFk3rMfovQ/6ONxZi2lfKCqr3jQ=

# ==============================================
# Task Runners - External Mode (Segurança)
# ==============================================
# Ativa os task runners (executam código JS/Python isolado)
N8N_RUNNERS_ENABLED=true

# Modo de execução (external = containers separados, seguro para produção)
N8N_RUNNERS_MODE=external

# Token compartilhado para autenticação entre n8n e task runners
# Gere um token forte e aleatório
N8N_RUNNERS_AUTH_TOKEN=NX3YO/t/Lvfc8hFDTOM8r2+2zAJY4H2o4vRyh2ocW2TG6Rj5

# Permite task broker aceitar conexões externas (necessário para Docker Compose)
N8N_RUNNERS_BROKER_LISTEN_ADDRESS=0.0.0.0

# Habilita suporte a Python nos Code Nodes
N8N_NATIVE_PYTHON_RUNNER=true

# Segundos de inatividade antes do task runner desligar automaticamente
N8N_RUNNERS_AUTO_SHUTDOWN_TIMEOUT=15

# ==============================================
# Production Settings (Opcional)
# ==============================================
# Descomente e configure para produção:
# WEBHOOK_URL=https://seu-dominio.com
# N8N_HOST=seu-dominio.com
# N8N_PROTOCOL=https
# N8N_PORT=443

N8N_LISTEN_ADDRESS=::